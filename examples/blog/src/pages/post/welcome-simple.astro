---
import Layout from '../../components/Layout.astro';
import ShareButton from '../../components/ShareButton.svelte';

// Simplified version without getStaticPaths for testing
const post = {
  slug: 'welcome',
  data: {
    title: 'Welcome to Minimal Astro Blog',
    description: 'Learn how to build your own static site generator from scratch',
    date: new Date('2024-01-01'),
    author: 'jp-knj',
    tags: ['astro', 'web development', 'tutorial']
  }
};

const formattedDate = new Date(post.data.date).toLocaleDateString('ja-JP', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<Layout title={post.data.title} description={post.data.description}>
  <article>
    <header class="post-header">
      <h1>{post.data.title}</h1>
      <div class="post-meta">
        <time datetime={post.data.date.toISOString()}>{formattedDate}</time>
        <div class="author">
          <span>by {post.data.author}</span>
        </div>
      </div>
      {post.data.tags && (
        <div class="tags">
          {post.data.tags.map(tag => (
            <span class="tag">{tag}</span>
          ))}
        </div>
      )}
    </header>

    <div class="post-content">
      <p>Welcome to our Minimal Astro implementation! This blog demonstrates the power of building your own static site generator from scratch.</p>
      
      <h2>What You'll Learn</h2>
      <p>In this series, we'll cover:</p>
      <ul>
        <li>Building an Astro file parser</li>
        <li>Implementing server-side rendering</li>
        <li>Creating a component system</li>
        <li>Adding multi-framework support</li>
        <li>Implementing Islands Architecture</li>
      </ul>
      
      <h2>Why Build Your Own?</h2>
      <p>Understanding how tools work under the hood makes you a better developer. By building a minimal version of Astro, you'll gain deep insights into:</p>
      <ul>
        <li>How modern build tools process files</li>
        <li>The principles behind Islands Architecture</li>
        <li>Server-side rendering techniques</li>
        <li>Component hydration strategies</li>
      </ul>
    </div>

    <div class="post-actions">
      <ShareButton 
        title={post.data.title}
        url={`/post/${post.slug}`}
        client:visible
      />
    </div>
  </article>
</Layout>

<style>
  article {
    max-width: 800px;
    margin: 0 auto;
  }

  .post-header {
    margin-bottom: 3rem;
  }

  .post-header h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    line-height: 1.2;
  }

  .post-meta {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: #666;
    margin-bottom: 1rem;
  }

  .author {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .tags {
    display: flex;
    gap: 0.5rem;
  }

  .tag {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    background: #e5e7eb;
    border-radius: 9999px;
    font-size: 0.875rem;
    color: #4b5563;
  }

  .post-content {
    font-size: 1.125rem;
    line-height: 1.75;
    margin-bottom: 3rem;
  }

  .post-content h2 {
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  .post-content p {
    margin-bottom: 1.5rem;
  }

  .post-content ul {
    margin-bottom: 1.5rem;
    padding-left: 1.5rem;
  }

  .post-content li {
    margin-bottom: 0.5rem;
  }

  .post-actions {
    padding: 2rem 0;
    border-top: 1px solid #e5e7eb;
    border-bottom: 1px solid #e5e7eb;
  }
</style>